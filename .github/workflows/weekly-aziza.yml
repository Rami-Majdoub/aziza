name: Weekly Aziza Script

on:
  schedule:
    # Run every Sunday at 9:00 AM UTC
    - cron: '0 9 * * 0'
  workflow_dispatch: # Allow manual triggering

jobs:
  run-aziza:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        fetch-depth: 0

    - name: Install curl
      run: sudo apt-get update && sudo apt-get install -y curl

    - name: Make scripts executable
      run: |
        chmod +x aziza.sh
        chmod +x commit-push.sh

    - name: Run aziza script
      run: bash aziza.sh "$(date +%U-%y)"  # Pass current week-year (e.g., 49-25 for week 49 of 2025) as argument

    - name: Commit and push changes
      run: bash commit-push.sh